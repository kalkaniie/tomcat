var wiswigEditId=1; 
var tablewindow, letterWindow,formletterWindow;Ext.ux.HTMLEditorImage = function() {var editor;var tabs;var openTableWindow = function() {tablewindow = new Ext.Window({title: 'Table Insert',closable: true,modal: true,closeAction:'close',width: 400,height: 350,pageX:400,pageY:200,plain: true,layout: 'fit',border: false,autoLoad :{url:'/js/kor/editor/popup/create_table.jsp?wiswigEditId='+wiswigEditId, scripts:true, scope: this}});tablewindow.show(this);}
return {init: function(htmlEditor) {editor = htmlEditor;editor.tb.insertToolsBefore('sourceedit', {itemId: 'addTable',cls: 'x-btn-icon x-edit-table',handler: openTableWindow,scope: this,clickEvent: 'mousedown',tooltip: {title: 'table',text: '테이블 삽입',cls: 'x-html-editor-tip'}});if(imgTool){editor.tb.insertToolsBefore('sourceedit', {itemId: 'addimage',cls: 'x-btn-icon x-edit-imageappend',handler: mailImageAppend,scope: this,clickEvent: 'mousedown',tooltip: {	title: 'image',text: '본문이미지 삽입',	cls: 'x-html-editor-tip'}});}if(letterTool){editor.tb.insertToolsBefore('sourceedit', {itemId: 'addLetter',cls: 'x-btn-icon x-edit-letter',handler: selectLetter,scope: this,clickEvent: 'mousedown',tooltip: {text: '편지지사용',cls: 'x-html-editor-tip'}});}if(formletterTool){editor.tb.insertToolsBefore('sourceedit', {itemId: 'addFormLetter',cls: 'x-btn-icon x-edit-formletter',handler: formletter,scope: this,clickEvent: 'mousedown',tooltip: {text: '문서양식',cls: 'x-html-editor-tip'}});}
var insertAtCursor = function(text){if(!this.activated){return;}if(Ext.isIE){var r = this.doc.selection.createRange();if(r){r.pasteHTML(text);this.deferFocus();}}else if(Ext.isGecko || Ext.isOpera){this.win.focus();this.execCmd('InsertHTML', text);this.deferFocus();}else if(Ext.isSafari){this.execCmd('InsertText', text);this.deferFocus();}};}}}